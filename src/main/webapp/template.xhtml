<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="/base.xhtml">
    <ui:define name="menu" >

        <div class="header_div">
            <h:form>
                <p:fieldset legend="Electronic Junin">
                    <p:menuButton style="float: right;" class="menu_button" value="#{sessionBacking.usuario.nombreUsuario}" icon="fa fa-home">
                        <p:menuitem icon="fa fa-sign-out" value="Salir" action="#{sessionBacking.logout()}" />
                    </p:menuButton>
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:link outcome="#{sessionBacking.urlMap.getWELCOME()}">
                            <p:graphicImage style="width: 50%" url="/resources/images/logo.png"/>
                        </h:link>
                        <p:outputLabel><i class="fa fa-wrench" aria-hidden="true"></i> Servicio tecnico y accesorios
                        </p:outputLabel>
                    </h:panelGrid>
                </p:fieldset>
            </h:form>
        </div>

        <div class="menu_div">
            <f:view contentType="text/html">
                <h:form>
                    <p:growl id="messages" autoUpdate="true"/>
                    <p:panel id="panel_menu" header="Menu principal">
                        <p:menu id="menu" toggleable="true">
                            <c:choose>

                                <c:when test="#{sessionBacking.usuario.administrador}">
                                    <p:submenu label="Usuarios" icon="fa fa-user">
                                        <p:menuitem value="Listar" url="#{sessionBacking.urlMap.getIndexUsuarios()}"/>
                                        <p:menuitem value="Nuevo" url="#{sessionBacking.urlMap.getNewUsuario()}"/>
                                    </p:submenu>
                                    <p:submenu label="Categorias">
                                        <p:menuitem value="Listar" url="#{sessionBacking.urlMap.getIndexCategorias()}"/>
                                        <p:menuitem value="Nueva" url="#{sessionBacking.urlMap.getNewCategoria()}"/>
                                    </p:submenu>
                                    <p:submenu label="Personas">
                                        <p:menuitem value="Empleados" url="#{sessionBacking.urlMap.getIndexEmpleados()}"/>
                                        <p:menuitem value="Clientes" url="#{sessionBacking.urlMap.getIndexClientes()}"/>
                                        <p:menuitem value="Proveedores" url="#{sessionBacking.urlMap.getIndexProveedores()}"/>
                                    </p:submenu>
                                    <p:submenu label="Reparaciones">
                                        <p:menuitem value="Listar" url="#{sessionBacking.urlMap.getIndexReparaciones()}"/>
                                        <p:menuitem value="Nueva" url="#{sessionBacking.urlMap.getNewReparacion()}"/>
                                    </p:submenu>
                                    <p:submenu label="Solicitud de reparaciones">
                                        <p:menuitem value="Listar" url="#{sessionBacking.urlMap.getIndexSolicitudes()}"/>
                                    </p:submenu>
                                    <p:submenu label="Cotizaciones">
                                        <p:menuitem value="Listar" url="#{sessionBacking.urlMap.getIndexCotizaciones()}"/>
                                        <p:menuitem value="Nueva" url="#{sessionBacking.urlMap.getNewCotizacion()}"/>
                                    </p:submenu>
                                </c:when>

                                <c:otherwise>
                                    <p:submenu  icon="fa fa-user" label="#{sessionBacking.usuario.nombreUsuario}" >
                                        <p:menuitem value="Solicitar reparacion" url="#{sessionBacking.urlMap.getNewSolicitud()}"/>
                                        <p:menuitem value="Ver estado de mis reparaciones" url="#{sessionBacking.urlMap}"/>
                                        <p:menuitem value="Ver productos" url="#{sessionBacking.urlMap}"/>
                                        <p:menuitem  value="Salir" action="#{sessionBacking.logout()}"/>
                                    </p:submenu>
                                </c:otherwise>

                            </c:choose>

                        </p:menu>
                    </p:panel>
                    <div class="content_div">
                        <ui:insert name="content"/>
                    </div>
                </h:form>
            </f:view>
        </div>
    </ui:define>
</ui:composition>
