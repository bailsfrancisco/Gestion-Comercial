<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="/base.xhtml">

    <ui:define name="menu" >
        <p:layout fullPage="true">

            <p:layoutUnit header="Electronic Junin" position="north" size="auto" resizable="false" closable="false" collapsible="false">
                <div class="header_div">
                    <h:form>
                        <div>
                            <p:splitButton id="basic" value="#{sessionBacking.usuario.nombreUsuario}" icon="fa fa-home" style="float:right; color: black">
                                <p:menuitem icon="fa fa-sign-out" value="Salir" action="#{sessionBacking.logout()}" />

                            </p:splitButton>  
                            <h:panelGrid columns="2" cellpadding="5">
                                <h:link outcome="#{sessionBacking.urlMap.getWELCOME()}">
                                    <p:graphicImage style="width: 50%" url="/resources/images/logo.png"/>
                                </h:link>
                                <p:outputLabel><i class="fa fa-wrench" aria-hidden="true"></i> Servicio tecnico y accesorios
                                </p:outputLabel>
                            </h:panelGrid>
                        </div>
                    </h:form>
                </div>
            </p:layoutUnit>

            <p:layoutUnit position="west" size="300" header="Menu principal" resizable="false" closable="false" collapsible="false">

                <f:view contentType="text/html">
                    <h:form>
                        <p:growl id="messages" autoUpdate="true"/>
                        <p:panel id="panel_menu">
                            <p:menu id="menu" toggleable="true">
                                <c:choose>

                                    <c:when test="#{sessionBacking.usuario.administrador}">
                                        <p:submenu label="Usuarios" icon="fa fa-user">
                                            <p:menuitem value="Listar" action="#{sessionBacking.urlMap.getIndexUsuarios()}"/>
                                            <p:menuitem value="Nuevo" action="#{sessionBacking.urlMap.getNewUsuario()}"/>
                                        </p:submenu>
                                        <p:submenu label="Categorias">
                                            <p:menuitem value="Listar" action="#{sessionBacking.urlMap.getIndexCategorias()}"/>
                                            <p:menuitem value="Nueva" action="#{sessionBacking.urlMap.getNewCategoria()}"/>
                                        </p:submenu>
                                        <p:submenu label="Productos">
                                            <p:menuitem value="Listar" action="#{sessionBacking.urlMap.getIndexProductos()}"/>
                                            <p:menuitem value="Nuevo" action="#{sessionBacking.urlMap.getNewProducto()}"/>
                                        </p:submenu>
                                        <p:submenu label="Personas">
                                            <p:menuitem value="Empleados" action="#{sessionBacking.urlMap.getIndexEmpleados()}"/>
                                            <p:menuitem value="Clientes" action="#{sessionBacking.urlMap.getIndexClientes()}"/>
                                            <p:menuitem value="Proveedores" action="#{sessionBacking.urlMap.getIndexProveedores()}"/>
                                        </p:submenu>
                                        <p:submenu label="Reparaciones">
                                            <p:menuitem value="Listar" action="#{sessionBacking.urlMap.getIndexReparaciones()}"/>
                                            <p:menuitem value="Nueva" action="#{sessionBacking.urlMap.getNewReparacion()}"/>
                                        </p:submenu>
                                        <p:submenu label="Solicitud de reparaciones">
                                            <p:menuitem value="Listar" action="#{sessionBacking.urlMap.getIndexSolicitudes()}"/>
                                        </p:submenu>
                                        <p:submenu label="Cotizaciones">
                                            <p:menuitem value="Listar" action="#{sessionBacking.urlMap.getIndexCotizaciones()}"/>
                                            <p:menuitem value="Nueva" action="#{sessionBacking.urlMap.getNewCotizacion()}"/>
                                        </p:submenu>
                                    </c:when>

                                    <c:otherwise>
                                        <p:submenu  icon="fa fa-user" label="#{sessionBacking.usuario.nombreUsuario}" >
                                            <p:menuitem value="Solicitar reparacion" action="#{sessionBacking.urlMap.getNewSolicitud()}"/>
                                            <p:menuitem value="Ver estado de mis reparaciones" action="#{sessionBacking.urlMap}"/>
                                            <p:menuitem value="Ver productos" action="#{sessionBacking.urlMap}"/>
                                            <p:menuitem  value="Salir" action="#{sessionBacking.logout()}"/>
                                        </p:submenu>
                                    </c:otherwise>

                                </c:choose>

                            </p:menu>
                        </p:panel>                       
                    </h:form>
                </f:view>

            </p:layoutUnit>

            <p:layoutUnit position="center">
                <f:view contentType="text/html">
                    <h:form>
                        <div class="content_div">
                            <p:growl id="messages" autoUpdate="true"/>
                            <ui:insert name="content"/>
                        </div>
                    </h:form>
                </f:view>
            </p:layoutUnit>

            <p:layoutUnit position="south" size="100" header="Datos como direccion, mails, telefonos, etc" resizable="false" closable="false" collapsible="false">

            </p:layoutUnit>

        </p:layout>   
    </ui:define>
</ui:composition>
